<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.ssd.gateway.integrationTest.SecurityHeadersTest" tests="1" skipped="0" failures="1" errors="0" timestamp="2024-12-04T12:41:48" hostname="Grainnes-MBP" time="3.527">
  <properties/>
  <testcase name="check headers()" classname="com.ssd.gateway.integrationTest.SecurityHeadersTest" time="3.527">
    <failure message="org.opentest4j.AssertionFailedError: &#10;expected: &quot;none)&quot;&#10; but was: &quot;none&quot;" type="org.opentest4j.AssertionFailedError">org.opentest4j.AssertionFailedError: 
expected: &quot;none)&quot;
 but was: &quot;none&quot;
	at app//com.ssd.gateway.integrationTest.SecurityHeadersTest.check headers(SecurityHeadersTest.kt:27)
	at java.base@21.0.4/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base@21.0.4/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base@21.0.4/java.util.ArrayList.forEach(ArrayList.java:1596)
</failure>
  </testcase>
  <system-out><![CDATA[2024-12-04 12:41:36 [Test worker] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.ssd.gateway.integrationTest.SecurityHeadersTest]: SecurityHeadersTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-12-04 12:41:37 [Test worker] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.ssd.gateway.Application for test class com.ssd.gateway.integrationTest.SecurityHeadersTest
Project root directory: /Users/grainneomalley/damo/workspace/college/damo_partner_portal/gateway-api
2024-12-04 12:41:38 [Test worker] INFO  o.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2024-12-04 12:41:38 [Test worker] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
starting redis..
2024-12-04 12:41:38 [Test worker] INFO  o.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2024-12-04 12:41:38 [Test worker] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2024-12-04 12:41:39 [Test worker] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2024-12-04 12:41:39 [Test worker] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2024-12-04 12:41:39 [Test worker] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.2.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7839 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/grainneomalley/Library/Containers/com.docker.docker/Data/docker-cli.sock
2024-12-04 12:41:39 [Test worker] INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2024-12-04 12:41:39 [Test worker] INFO  o.testcontainers.DockerClientFactory - Checking the system...
2024-12-04 12:41:39 [Test worker] INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2024-12-04 12:41:39 [Test worker] INFO  tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2024-12-04 12:41:39 [Test worker] INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 53ab6a54b68a5a3114efe3e8bda7903ee059a36a2fd6bf1bdbe41dffdd141bc7
2024-12-04 12:41:40 [Test worker] INFO  tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.841292S
2024-12-04 12:41:40 [Test worker] INFO  o.t.containers.ComposeDelegate - Preemptively checking local images for 'bitnami/redis:latest', referenced via a compose file or transitive Dockerfile. If not available, it will be pulled.
2024-12-04 12:41:40 [Test worker] INFO  tc.docker/compose:1.29.2 - Copying all files in /Users/grainneomalley/damo/workspace/college/damo_partner_portal/gateway-api/local into the container
2024-12-04 12:41:40 [Test worker] INFO  tc.docker/compose:1.29.2 - Creating container for image: docker/compose:1.29.2
2024-12-04 12:41:40 [Test worker] INFO  tc.docker/compose:1.29.2 - Container docker/compose:1.29.2 is starting: 30880e4fccfd7d3f9e4f678a0ebb713e7ccf115b07d4ec2b028391470a43cc74
2024-12-04 12:41:43 [Test worker] INFO  tc.docker/compose:1.29.2 - Container docker/compose:1.29.2 started in PT2.676539S
2024-12-04 12:41:43 [Test worker] INFO  tc.docker/compose:1.29.2 - Docker Compose container is running for command: up -d
2024-12-04 12:41:43 [docker-java-stream--1520158570] INFO  tc.docker/compose:1.29.2 - STDERR: Creating volume "wvvpfgu2cri3_redis" with local driver
2024-12-04 12:41:43 [docker-java-stream--1520158570] INFO  tc.docker/compose:1.29.2 - STDERR: Creating wvvpfgu2cri3_redis_1 ... 
2024-12-04 12:41:43 [docker-java-stream--1520158570] INFO  tc.docker/compose:1.29.2 - STDERR: Creating wvvpfgu2cri3_redis_1 ... done
2024-12-04 12:41:43 [Test worker] INFO  tc.docker/compose:1.29.2 - Docker Compose has finished running
2024-12-04 12:41:43 [Test worker] INFO  tc.alpine/socat:1.7.4.3-r0 - Creating container for image: alpine/socat:1.7.4.3-r0
2024-12-04 12:41:43 [Test worker] INFO  tc.alpine/socat:1.7.4.3-r0 - Container alpine/socat:1.7.4.3-r0 is starting: 0f6a1791799dd8d1cbf7a85d38c090681ac49c22b094b1857bea764ff126e349
2024-12-04 12:41:43 [Test worker] INFO  tc.alpine/socat:1.7.4.3-r0 - Container alpine/socat:1.7.4.3-r0 started in PT0.586402S
redis started

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.0)

2024-12-04 12:41:44 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-12-04 12:41:44 [Test worker] INFO  c.s.g.i.SecurityHeadersTest - Starting SecurityHeadersTest using Java 21.0.4 with PID 64098 (started by grainneomalley in /Users/grainneomalley/damo/workspace/college/damo_partner_portal/gateway-api)
2024-12-04 12:41:44 [Test worker] INFO  c.s.g.i.SecurityHeadersTest - No active profile set, falling back to 1 default profile: "default"
2024-12-04 12:41:45 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-12-04 12:41:45 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-12-04 12:41:45 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2024-12-04 12:41:46 [Test worker] INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=8076b5d6-90f7-31c7-9730-0f3c7fb7fcc0
redisConfig.host localhost
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2024-12-04 12:41:48 [Test worker] INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2024-12-04 12:41:48 [Test worker] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 54297 (http)
2024-12-04 12:41:48 [Test worker] INFO  c.s.g.i.SecurityHeadersTest - Started SecurityHeadersTest in 4.424 seconds (process running for 14.125)
2024-12-04 12:41:52 [Test worker] INFO  tc.docker/compose:1.29.2 - Copying all files in /Users/grainneomalley/damo/workspace/college/damo_partner_portal/gateway-api/local into the container
2024-12-04 12:41:52 [Test worker] INFO  tc.docker/compose:1.29.2 - Creating container for image: docker/compose:1.29.2
2024-12-04 12:41:52 [Test worker] INFO  tc.docker/compose:1.29.2 - Container docker/compose:1.29.2 is starting: da94596e2d4751be7ae3df9882fc7affe06d0ebf21da01296255a777b10f62af
2024-12-04 12:41:54 [lettuce-eventExecutorLoop-3-2] INFO  i.l.core.protocol.ConnectionWatchdog - Reconnecting, last destination was localhost/[0:0:0:0:0:0:0:1]:6379
2024-12-04 12:41:54 [lettuce-nioEventLoop-7-2] WARN  i.l.core.protocol.ConnectionWatchdog - Cannot reconnect to [localhost/<unresolved>:6379]: Connection closed prematurely
io.lettuce.core.RedisConnectionException: Connection closed prematurely
	at io.lettuce.core.protocol.RedisHandshakeHandler.channelInactive(RedisHandshakeHandler.java:76)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:81)
	at io.lettuce.core.ChannelGroupListener.channelInactive(ChannelGroupListener.java:54)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1352)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:301)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)
	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:850)
	at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:811)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-12-04 12:41:58 [Test worker] INFO  tc.docker/compose:1.29.2 - Container docker/compose:1.29.2 started in PT6.335274S
2024-12-04 12:41:58 [Test worker] INFO  tc.docker/compose:1.29.2 - Docker Compose container is running for command: down -v
2024-12-04 12:41:58 [docker-java-stream--1871784608] INFO  tc.docker/compose:1.29.2 - STDERR: Stopping wvvpfgu2cri3_redis_1 ... 
2024-12-04 12:41:58 [docker-java-stream--1871784608] INFO  tc.docker/compose:1.29.2 - STDERR: Stopping wvvpfgu2cri3_redis_1 ... done
2024-12-04 12:41:58 [docker-java-stream--1871784608] INFO  tc.docker/compose:1.29.2 - STDERR: Removing wvvpfgu2cri3_redis_1 ... 
2024-12-04 12:41:58 [docker-java-stream--1871784608] INFO  tc.docker/compose:1.29.2 - STDERR: Removing wvvpfgu2cri3_redis_1 ... done
2024-12-04 12:41:58 [docker-java-stream--1871784608] INFO  tc.docker/compose:1.29.2 - STDERR: Network damo_network is external, skipping
2024-12-04 12:41:58 [docker-java-stream--1871784608] INFO  tc.docker/compose:1.29.2 - STDERR: Removing volume wvvpfgu2cri3_redis
2024-12-04 12:41:58 [Test worker] INFO  tc.docker/compose:1.29.2 - Docker Compose has finished running
]]></system-out>
  <system-err><![CDATA[Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build what is described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#0.3
WARNING: A Java agent has been loaded dynamically (/Users/grainneomalley/.gradle/caches/modules-2/files-2.1/net.bytebuddy/byte-buddy-agent/1.15.10/e8eb255b2c378b9a6c7341e7b0e12f0a5636377/byte-buddy-agent-1.15.10.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
]]></system-err>
</testsuite>
